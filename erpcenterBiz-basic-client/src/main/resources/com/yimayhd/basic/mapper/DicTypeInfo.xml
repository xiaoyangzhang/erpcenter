<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.yihg.basic.dao.DicTypeMapper">
	<!-- <cache type="org.mybatis.caches.ehcache.EhcacheCache"/> -->
    
    <resultMap type="com.yihg.basic.po.DicTypeInfo" id="dicTypeInfo" >
		<id property="id" column="id" jdbcType="INTEGER" />
		<result property="pid" column="pid" jdbcType="INTEGER" />
		<result property="code" column="code" jdbcType="VARCHAR" />
		<result property="value" column="value" jdbcType="VARCHAR" />		
		<result property="status" column="status" jdbcType="INTEGER" />
		<result property="note" column="note" jdbcType="VARCHAR" />
		<result property="treePath" column="tree_path" jdbcType="VARCHAR" />
		<result property="level" column="level" jdbcType="INTEGER" />
		<result property="orderId" column="order_id" jdbcType="VARCHAR" />
		<result property="shareStatus" column="share_status" jdbcType="INTEGER" />
	</resultMap>
	<sql id="DicTypeColumns">
	  	id,code,value,status,note,pid,tree_path,level,order_id,share_status
	</sql>	
	<sql id="queryWhere">
		<where>
		    <if test="id != null" > id = #{id} </if>
		    <if test="pid != null" > pid = #{pid} </if>
			<if test="code != null" > and code = #{code} </if>
			<if test="value != null" > and value = #{value} </if>			
			<if test="status != null" > and status = #{status} </if>
			<if test="shareStatus != null" > and share_status = #{shareStatus} </if>
		</where>
		ORDER BY order_id DESC
	</sql>
	
	<delete id="delete" parameterType="java.lang.Integer">
        delete from sys_dic_type
        where id = #{id,jdbcType=INTEGER}
    </delete>
    
	<insert id="insert" parameterType="com.yihg.basic.po.DicTypeInfo" useGeneratedKeys="true" keyProperty="id">
        insert into sys_dic_type (id,code, value,note,pid,tree_path,level,order_id,share_status)
        values (#{id,jdbcType=INTEGER},#{code,jdbcType=VARCHAR},#{value,jdbcType=VARCHAR},#{note,jdbcType=VARCHAR},
        	#{pid,jdbcType=INTEGER},#{treePath,jdbcType=VARCHAR},#{level,jdbcType=INTEGER},#{orderId,jdbcType=VARCHAR},#{shareStatus,jdbcType=INTEGER})
    </insert>
    
	<update id="update" parameterType="com.yihg.basic.po.DicTypeInfo">
        update sys_dic_type
        <set>
			<if test="code != null" > code = #{code}, </if>
			<if test="value != null" > value = #{value}, </if>
			<if test="status != null" > status = #{status}, </if>
			<if test="note != null" > note = #{note}, </if>
			<if test="pid != null" > pid = #{pid}, </if>
			<if test="treePath != null" > tree_path = #{treePath}, </if>
			<if test="level != null" > level = #{level}, </if>
			<if test="orderId != null" > order_id = #{orderId}, </if>
			<if test="shareStatus != null" > share_status = #{shareStatus} </if>
		</set>	
		where id=#{id}		
    </update>
    
	<select id="getCount" parameterType="com.yihg.basic.po.DicTypeInfo" resultType="java.lang.Integer">
        select count(*) 
        from sys_dic_type
        <include refid="queryWhere" />        
    </select>
    
	<select id="getAll"  resultMap="dicTypeInfo">
        select <include refid="DicTypeColumns"/> 
        	from sys_dic_type
        <include refid="queryWhere" />        
    </select>
    
	<select id="getById" parameterType="java.lang.Integer"  resultMap="dicTypeInfo">
        select <include refid="DicTypeColumns"/>
        from sys_dic_type
       	where id=#{id}  
    </select>
	
	<select id="getWhere" parameterType="com.yihg.basic.po.DicTypeInfo"  resultMap="dicTypeInfo">
        select <include refid="DicTypeColumns"/>
        from sys_dic_type
        <include refid="queryWhere" />
    </select>
	
	<select id="getListByPid" resultMap="dicTypeInfo">
        select <include refid="DicTypeColumns"/>
        from sys_dic_type
		where pid=#{pid}
    </select>
	
	<select id="getPageList" resultMap="dicTypeInfo">
        select <include refid="DicTypeColumns"/>
        from sys_dic_type
		limit #{start},#{pageSize}
    </select>
    
    <select id="getListByPidAndName" resultMap="dicTypeInfo">
        select <include refid="DicTypeColumns"/>
        from sys_dic_type
        where 1=1
	    <if test="pid != null" > AND pid=#{pid}  </if>
	     <if test="name != null" > AND value like CONCAT('%','${name}','%' )  </if>
		order by order_id
    </select>
</mapper>